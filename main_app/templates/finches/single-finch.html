{% extends "base.html" %}
{% block main %}

<div class='content m-6'>
  <div class="columns">

    <div class="column">
      <div class="card p-3">
        <div class="content p-3">
          <p class="title is-4">
            {{finch.name}}
          </p>
          <p class="subtitle is-6">
            {{finch.species}}
          </p>
        </div>

        <div class="content p-3">
          <p>Description (male): {{finch.description}}</p>
          <p>Where to find it: {{finch.where_to_find}}</p>
        </div>
      </div>

      <div class='content m-6'>
        <a href="{% url 'finch_update' finch.id %}" class='button is-warning mx-2'>Edit</a>
        <a href="{% url 'finch_delete' finch.id %}" class='button is-danger mx-2'>Delete</a>
      </div>
    </div>
    <div class="column">
      <!-- display the finch meals -->

      <div class="card mb-6 p-6">
        <p class="title is-4">Meal History:</p>
        <table class="table">
          <thead>
            <th>Date</th>
            <th>Meal</th>
          </thead>
          <tbody>
            {% for feeding in finch.feeding_set.all %}
            <td>{{ feeding.date }}</td>
            <td>{{ feeding.get_meal_display}}</td>
          </tbody>
          {% endfor %}
        </table>
      </div>

      <!-- give option to add meal -->
      <div class='card p-6'>
        <p class="title is-4">Add a Meal:</p>
        <form action="{% url 'add_feeding' finch.id %}">
          {% csrf_token %}
          {{ feeding_form.as_p }}
          <input type="submit" value="Add Feeding" class='button is-primary is-light is-small'/>
        </form>
      </div>

    </div>
  </div>
</div>
{% endblock %}